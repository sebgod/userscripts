<!DOCTYPE html>

<html>
    <head>
        <title>Test HTTP Authentication</title>
    </head>
    <body>
<!--pas

function AuthToStr(webAuth : WebAuthentication) : string
begin
    case WebRequest.Authentication of
        WebAuthentication.Basic : Result := 'Basic';
        WebAuthentication.Digest : Result := 'Digest';
        WebAuthentication.NTLM : Result := 'NTLM';
        WebAuthentication.Negotiate : Result := 'Negotiate';
        WebAuthentication.Kerberos : Result := 'Kerberos';
    else
        Result := 'demo-needs-to-be-upgraded';
    end;
end; 


if WebRequest.Authentication=WebAuthentication.None then

   if WebRequest.Header['Authorization']<>'' then
      PrintLn('Authentication not activated in server options')
   else WebResponse.RequestAuthentication(WebAuthentication.Negotiate)
   
else begin
    if WebRequest.Authentication=WebAuthentication.Failed then
        PrintLn('Authentication failed')   
    else
        Print(Format('Authenticated as <strong>%s</strong> using <em>%s</em>', [WebRequest.AuthenticatedUser, AuthToStr(WebRequest.Authentication)]));
   
    if WebRequest.Security<>'' then begin
        PrintLn('<br> and ');
        PrintLn(WebRequest.Security);
    end;
   
end;
?-->
    </body>
</html>